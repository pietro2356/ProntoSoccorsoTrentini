"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[17],{8017:(ft,C,a)=>{a.r(C),a.d(C,{HomeStatoPSPage:()=>ut});var f=a(592),l=a(8458),v=a(4558),t=a(3953),I=a(1626),D=a(9974),w=a(4360),H=a(3669),T=a(1985),z=a(8359);class B extends z.yU{constructor(o,n){super()}schedule(o,n=0){return this}}const g={setInterval(e,o,...n){const{delegate:i}=g;return null!=i&&i.setInterval?i.setInterval(e,o,...n):setInterval(e,o,...n)},clearInterval(e){const{delegate:o}=g;return((null==o?void 0:o.clearInterval)||clearInterval)(e)},delegate:void 0};var W=a(7908);const F={now:()=>(F.delegate||Date).now(),delegate:void 0};class m{constructor(o,n=m.now){this.schedulerActionCtor=o,this.now=n}schedule(o,n=0,i){return new this.schedulerActionCtor(this,o).schedule(i,n)}}m.now=F.now;const V=new class $ extends m{constructor(o,n=m.now){super(o,n),this.actions=[],this._active=!1}flush(o){const{actions:n}=this;if(this._active)return void n.push(o);let i;this._active=!0;do{if(i=o.execute(o.state,o.delay))break}while(o=n.shift());if(this._active=!1,i){for(;o=n.shift();)o.unsubscribe();throw i}}}(class j extends B{constructor(o,n){super(o,n),this.scheduler=o,this.work=n,this.pending=!1}schedule(o,n=0){var i;if(this.closed)return this;this.state=o;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(o,n,i=0){return g.setInterval(o.flush.bind(o,this),i)}recycleAsyncId(o,n,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return n;null!=n&&g.clearInterval(n)}execute(o,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(o,n);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(o,n){let r,i=!1;try{this.work(o)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:o,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,(0,W.o)(i,this),null!=o&&(this.id=this.recycleAsyncId(n,o,null)),this.delay=null,super.unsubscribe()}}});var G=a(9470);var Q=a(8750);function S(e=1/0){let o;o=e&&"object"==typeof e?e:{count:e};const{count:n=1/0,delay:i,resetOnSuccess:r=!1}=o;return n<=0?H.D:(0,D.N)((s,c)=>{let h,P=0;const A=()=>{let E=!1;h=s.subscribe((0,w._)(c,y=>{r&&(P=0),c.next(y)},void 0,y=>{if(P++<n){const M=()=>{h?(h.unsubscribe(),h=null,A()):E=!0};if(null!=i){const ht="number"==typeof i?function L(e=0,o,n=V){let i=-1;return null!=o&&((0,G.m)(o)?n=o:i=o),new T.c(r=>{let s=function N(e){return e instanceof Date&&!isNaN(e)}(e)?+e-n.now():e;s<0&&(s=0);let c=0;return n.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}(i):(0,Q.Tg)(i(y,P)),R=(0,w._)(c,()=>{R.unsubscribe(),M()},()=>{c.complete()});ht.subscribe(R)}else M()}else c.error(y)})),E&&(h.unsubscribe(),h=null,A())};A()})}let b=(()=>{var e,o=new WeakMap;class n{constructor(){(0,f.A)(this,o,(0,t.WQX)(I.Qq))}get(r){return(0,l.A)(o,this).get(r).pipe(S(3))}post(r,s){return(0,l.A)(o,this).post(r,s).pipe(S(3))}put(r,s){return(0,l.A)(o,this).put(r,s).pipe(S(3))}delete(r){return(0,l.A)(o,this).delete(r).pipe(S(3))}patch(r,s){return(0,l.A)(o,this).patch(r,s).pipe(S(3))}head(r){return(0,l.A)(o,this).head(r).pipe(S(3))}options(r){return(0,l.A)(o,this).options(r)}}return(e=n).\u0275fac=function(r){return new(r||e)},e.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),n})();var U=a(9437),Y=a(5312),k=a(5576);let X=(()=>{var e,o=new WeakMap,n=new WeakMap,i=new WeakMap;class r{constructor(){(0,f.A)(this,o,void 0),(0,f.A)(this,n,void 0),(0,f.A)(this,i,void 0),(0,v.A)(o,this,(0,t.WQX)(b)),(0,v.A)(n,this,(0,t.WQX)(k.i)),(0,v.A)(i,this,(0,t.vPA)({dataAggiornamento:"",prontoSoccorso:[]})),this.statoPS=(0,t.EWP)(()=>(0,l.A)(i,this).call(this))}getStatoPS(){(0,l.A)(n,this).setLoading(),(0,l.A)(o,this).get(Y.c.apiTrentinoAA).pipe((0,U.W)(c=>{throw(0,l.A)(n,this).setError(c.message),c})).subscribe(c=>{(0,l.A)(i,this).set(c),(0,l.A)(n,this).setReady()})}}return(e=r).\u0275fac=function(c){return new(c||e)},e.\u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),r})();var u=function(e){return e.bianco="bianco",e.verde="verde",e.giallo="giallo",e.arancio="arancio",e.azzurro="azzurro",e.rosso="rosso",e}(u||{});const O=[{name:u.bianco,hex:"#DCDFE4"},{name:u.verde,hex:"#A5ED72"},{name:u.giallo,hex:"#F8F85F"},{name:u.arancio,hex:"#FFB053"},{name:u.azzurro,hex:"#61AFEF"},{name:u.rosso,hex:"#FF4E4A"}],Z=["waitbox"];let K=(()=>{var e;class o{constructor(){this.waitVal=t.hFB.required(),this.color=(0,t.hFB)(),this.waitBox=t.ebz.required("waitbox"),(0,t.QZP)(()=>{var i;this.waitBox().nativeElement.style.setProperty("background-color",function J(e){const o=O.find(n=>n.name.toLowerCase()===e.toLowerCase());return o?o.hex:void 0}(null===(i=this.color())||void 0===i?void 0:i.toString()))})}}return(e=o).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["pst-waiting-box"]],viewQuery:function(i,r){1&i&&t.wEZ(r.waitBox,Z,5),2&i&&t.NyB()},inputs:{waitVal:[1,"waitVal"],color:[1,"color"]},standalone:!0,features:[t.aNF],decls:3,vars:1,consts:[["waitbox",""],[1,"waitValBox"]],template:function(i,r){1&i&&(t.j41(0,"div",1,0),t.EFF(2),t.k0s()),2&i&&(t.R7$(2),t.JRh(r.waitVal()))},styles:[".waitValBox[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;width:3rem;height:3rem;border-radius:4px;color:#3f3f3f;font-size:2rem}"],changeDetection:0}),o})(),_=(()=>{var e;class o{transform(i){if(!i)return"";const r=i.toLowerCase();return r.charAt(0).toUpperCase()+r.slice(1)}}return(e=o).\u0275fac=function(i){return new(i||e)},e.\u0275pipe=t.EJ8({name:"firstLetterToCapital",type:e,pure:!0,standalone:!0}),o})(),q=(()=>{var e;class o{transform(i){return i.split(" - ")[1]}}return(e=o).\u0275fac=function(i){return new(i||e)},e.\u0275pipe=t.EJ8({name:"extractPS",type:e,pure:!0,standalone:!0}),o})();var d=a(5676);let tt=(()=>{var e;class o{constructor(){this.prontoSoccorso=t.geq.required(),this.ColorName=u}}return(e=o).\u0275fac=function(i){return new(i||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["pst-card-ps"]],inputs:{prontoSoccorso:[1,"prontoSoccorso"]},outputs:{prontoSoccorso:"prontoSoccorsoChange"},standalone:!0,features:[t.aNF],decls:15,vars:16,consts:[[1,"bg_shade"],[1,"waitbox-align"],[3,"waitVal","color"]],template:function(i,r){1&i&&(t.j41(0,"ion-card",0)(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3),t.nI1(4,"firstLetterToCapital"),t.k0s(),t.j41(5,"ion-card-subtitle"),t.EFF(6),t.nI1(7,"extractPS"),t.k0s()(),t.j41(8,"ion-card-content")(9,"div",1),t.nrm(10,"pst-waiting-box",2)(11,"pst-waiting-box",2)(12,"pst-waiting-box",2)(13,"pst-waiting-box",2)(14,"pst-waiting-box",2),t.k0s()()()),2&i&&(t.R7$(3),t.JRh(t.bMT(4,12,r.prontoSoccorso().localita)),t.R7$(3),t.JRh(t.bMT(7,14,r.prontoSoccorso().ps)),t.R7$(4),t.Y8G("waitVal",r.prontoSoccorso().attesa.bianco)("color",r.ColorName.bianco),t.R7$(),t.Y8G("waitVal",r.prontoSoccorso().attesa.verde)("color",r.ColorName.verde),t.R7$(),t.Y8G("waitVal",r.prontoSoccorso().attesa.azzurro)("color",r.ColorName.azzurro),t.R7$(),t.Y8G("waitVal",r.prontoSoccorso().attesa.arancio)("color",r.ColorName.arancio),t.R7$(),t.Y8G("waitVal",r.prontoSoccorso().attesa.rosso)("color",r.ColorName.rosso))},dependencies:[K,_,q,d.b_,d.ME,d.I9,d.tN,d.HW],styles:[".waitbox-align[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:1rem}"],changeDetection:0}),o})();var p=a(9842),x=a(177);let et=(()=>{var e;class o{constructor(){(0,p.A)(this,"styleClass",void 0),(0,p.A)(this,"style",void 0),(0,p.A)(this,"shape","rectangle"),(0,p.A)(this,"animation","wave"),(0,p.A)(this,"borderRadius",void 0),(0,p.A)(this,"size",void 0),(0,p.A)(this,"width","100%"),(0,p.A)(this,"height","1rem")}containerClass(){return{"p-skeleton p-component":!0,"p-skeleton-circle":"circle"===this.shape,"p-skeleton-none":"none"===this.animation}}get containerStyle(){return this.size?{...this.style,width:this.size,height:this.size,borderRadius:this.borderRadius}:{width:this.width,height:this.height,borderRadius:this.borderRadius,...this.style}}}return e=o,(0,p.A)(o,"\u0275fac",function(i){return new(i||e)}),(0,p.A)(o,"\u0275cmp",t.VBU({type:e,selectors:[["p-skeleton"]],hostAttrs:[1,"p-element"],inputs:{styleClass:"styleClass",style:"style",shape:"shape",animation:"animation",borderRadius:"borderRadius",size:"size",width:"width",height:"height"},decls:1,vars:7,consts:[[3,"ngClass","ngStyle"]],template:function(i,r){1&i&&t.nrm(0,"div",0),2&i&&(t.HbH(r.styleClass),t.Y8G("ngClass",r.containerClass())("ngStyle",r.containerStyle),t.BMQ("data-pc-name","skeleton")("aria-hidden",!0)("data-pc-section","root"))},dependencies:[x.YU,x.B3],styles:['@layer primeng{.p-skeleton{position:relative;overflow:hidden}.p-skeleton:after{content:"";animation:p-skeleton-animation 1.2s infinite;height:100%;left:0;position:absolute;right:0;top:0;transform:translate(-100%);z-index:1}.p-skeleton.p-skeleton-circle{border-radius:50%}.p-skeleton-none:after{animation:none}}@keyframes p-skeleton-animation{0%{transform:translate(-100%)}to{transform:translate(100%)}}\n'],encapsulation:2,changeDetection:0})),o})(),ot=(()=>{var e;class o{}return e=o,(0,p.A)(o,"\u0275fac",function(i){return new(i||e)}),(0,p.A)(o,"\u0275mod",t.$C({type:e})),(0,p.A)(o,"\u0275inj",t.G2t({imports:[x.MD]})),o})();const nt=(e,o)=>o.codPsOd;function it(e,o){1&e&&(t.j41(0,"ion-card"),t.nrm(1,"p-skeleton",5),t.k0s(),t.j41(2,"ion-card"),t.nrm(3,"p-skeleton",5),t.k0s(),t.j41(4,"ion-card"),t.nrm(5,"p-skeleton",5),t.k0s())}function rt(e,o){if(1&e&&(t.nrm(0,"br"),t.j41(1,"p"),t.EFF(2),t.k0s()),2&e){const n=t.XpG(2);t.R7$(2),t.SpI("Errore: ",n.appStateService.error,"")}}function st(e,o){if(1&e&&(t.j41(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3,"Pronto Soccorso non disponibile"),t.k0s()(),t.j41(4,"ion-card-content")(5,"p"),t.EFF(6,"Il servizio di Pronto Soccorso non \xe8 disponibile al momento. Riprovare pi\xf9 tardi."),t.k0s(),t.DNE(7,rt,3,1),t.k0s()()),2&e){const n=t.XpG();t.R7$(7),t.vxM(n.appStateService.error?7:-1)}}function at(e,o){1&e&&t.nrm(0,"pst-card-ps",3),2&e&&t.Y8G("prontoSoccorso",o.$implicit)}function ct(e,o){1&e&&(t.j41(0,"div",4)(1,"p"),t.EFF(2,"Non ci sono dati disponibili"),t.k0s()())}function lt(e,o){if(1&e&&t.DNE(0,ct,3,0,"div",4),2&e){const n=t.XpG();t.vxM(n.appStateService.isStatusReady()?0:-1)}}function dt(e,o){if(1&e&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.SpI("Ultimo aggiornamento: ",n.statoPS().dataAggiornamento,"")}}function pt(e,o){1&e&&(t.j41(0,"p"),t.EFF(1,"Ultimo aggiornamento: non disponibile"),t.k0s())}let ut=(()=>{var e,o=new WeakMap,n=new WeakMap;class i{constructor(){(0,f.A)(this,o,void 0),(0,f.A)(this,n,void 0),(0,v.A)(o,this,(0,t.WQX)(b)),(0,v.A)(n,this,(0,t.WQX)(X)),this.appStateService=(0,t.WQX)(k.i),this.statoPS=(0,l.A)(n,this).statoPS}ngOnInit(){(0,l.A)(n,this).getStatoPS()}refreshData(s){this.statoPS().prontoSoccorso=[],(0,l.A)(n,this).getStatoPS(),s.detail.complete()}}return(e=i).\u0275fac=function(s){return new(s||e)},e.\u0275cmp=t.VBU({type:e,selectors:[["pst-home-statops"]],standalone:!0,features:[t.aNF],decls:17,vars:6,consts:[[3,"translucent"],[1,"ion-padding",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],[3,"prontoSoccorso"],[1,"ion-text-center"],["height","9rem","borderRadius","4px"]],template:function(s,c){1&s&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"\u2695\ufe0fPronto Soccorso Trentini"),t.k0s()()(),t.j41(4,"ion-content",1)(5,"ion-refresher",2),t.bIt("ionRefresh",function(h){return c.refreshData(h)}),t.nrm(6,"ion-refresher-content"),t.k0s(),t.DNE(7,it,6,0)(8,st,8,1,"ion-card"),t.Z7z(9,at,1,1,"pst-card-ps",3,nt,!1,lt,1,1),t.k0s(),t.j41(12,"ion-footer")(13,"ion-toolbar")(14,"div",4),t.DNE(15,dt,2,1,"p")(16,pt,2,0,"p"),t.k0s()()()),2&s&&(t.Y8G("translucent",!0),t.R7$(4),t.Y8G("fullscreen",!0),t.R7$(3),t.vxM(c.appStateService.isStatusLoading()?7:-1),t.R7$(),t.vxM(c.appStateService.isStatusError()?8:-1),t.R7$(),t.Dyx(c.statoPS().prontoSoccorso),t.R7$(6),t.vxM(c.statoPS().dataAggiornamento?15:16))},dependencies:[tt,d.W9,d.eU,d.BC,d.ai,d.M0,ot,et,d.b_,d.ME,d.I9,d.tN,d.To,d.Ki],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"],changeDetection:0}),i})()}}]);